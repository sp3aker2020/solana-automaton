<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sovereign Dashboard | Conway SOLAUTO</title>
    <link rel="stylesheet" href="style.css">
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&family=Roboto+Mono:wght@400;700&display=swap"
        rel="stylesheet">
</head>

<body>
    <!-- Setup Wizard Overlay -->
    <div id="setup-wizard" class="modal-overlay hidden">
        <div class="modal-content glass-container setup-wizard-card">
            <div class="wizard-header">
                <h2>AGENT INITIALIZATION</h2>
                <div class="wizard-steps-indicator">
                    <span class="dot active"></span>
                    <span class="dot"></span>
                    <span class="dot"></span>
                </div>
            </div>

            <div id="wizard-step-1" class="wizard-step">
                <h3>Identity Forge</h3>
                <p class="step-desc">Specify your agent's name and its core genesis prompt.</p>
                <div class="input-group">
                    <label>Agent Name</label>
                    <input type="text" id="setup-name" placeholder="e.g. SOL-ARIS">
                </div>
                <div class="input-group">
                    <label>Genesis Prompt</label>
                    <textarea id="setup-genesis"
                        placeholder="Define the agent's purpose, personality and goals..."></textarea>
                </div>
                <button class="btn btn-primary" onclick="wizardNext()">CONTINUE</button>
            </div>

            <div id="wizard-step-2" class="wizard-step hidden">
                <h3>Survival Calibration</h3>
                <p class="step-desc">Configure the autonomous bridging mechanism.</p>
                <div class="input-group">
                    <label>Bridge Provider</label>
                    <select id="setup-provider">
                        <option value="debridge">deBridge DLN (High Efficiency, $2 min)</option>
                        <option value="mayan">Mayan Finance (High Reliability, $15 min)</option>
                    </select>
                </div>
                <div class="checkbox-group">
                    <input type="checkbox" id="setup-auto-refill" checked>
                    <label for="setup-auto-refill">Enable Phase 2 Autonomous Bridge Refill</label>
                </div>
                <div class="wizard-actions">
                    <button class="btn btn-secondary" onclick="wizardPrev()">BACK</button>
                    <button class="btn btn-primary" onclick="wizardNext()">CONTINUE</button>
                </div>
            </div>

            <div id="wizard-step-3" class="wizard-step hidden">
                <h3>Ownership Link</h3>
                <p class="step-desc">Link your Solana address for credit top-ups.</p>
                <div class="input-group">
                    <label>Your Solana Address (Creator)</label>
                    <input type="text" id="setup-creator-sol" placeholder="Enter your Solana Wallet address">
                </div>
                <div class="input-group">
                    <label>Your Ethereum Address</label>
                    <input type="text" id="setup-creator-eth" placeholder="Enter your EVM Wallet address">
                </div>
                <div class="wizard-actions">
                    <button class="btn btn-secondary" onclick="wizardPrev()">BACK</button>
                    <button id="launch-btn" class="btn btn-glow" onclick="submitSetup()">LAUNCH AGENT</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Top Up Modal -->
    <div id="topup-modal" class="modal-overlay hidden">
        <div class="modal-content glass-container setup-wizard-card">
            <div class="wizard-header">
                <h2>FUEL YOUR AGENT</h2>
            </div>
            <div class="wizard-step">
                <p class="step-desc">Purchase Conway Credits using your agent's Solana USDC treasury. Funds are bridged
                    to Base automatically.</p>
                <div class="amount-grid">
                    <button class="btn btn-amount" data-amount="5" onclick="selectAmount(5)">$5</button>
                    <button class="btn btn-amount" data-amount="15" onclick="selectAmount(15)">$15</button>
                    <button class="btn btn-amount" data-amount="25" onclick="selectAmount(25)">$25</button>
                    <button class="btn btn-amount" data-amount="50" onclick="selectAmount(50)">$50</button>
                </div>
                <div class="input-group" style="margin-top: 20px;">
                    <label>Amount (USDC)</label>
                    <input type="number" id="topup-amount" value="10" min="2">
                </div>
                <div class="wizard-actions">
                    <button class="btn btn-secondary" onclick="closeTopUpModal()">CANCEL</button>
                    <button id="bridge-btn" class="btn btn-glow" onclick="submitTopUp()">BRIDGE FUNDS</button>
                </div>
            </div>
        </div>
    </div>

    <div class="glass-container">
        <!-- Banner -->
        <div class="dashboard-banner">
            <img src="assets/banner.png" alt="Conway Banner">
        </div>

        <!-- Header -->
        <header>
            <div class="status-indicator">
                <img src="assets/logo.png" alt="S" class="dashboard-logo">
                <div id="status-pulse" class="pulse offline"></div>
                <span id="status-text">AGENT OFFLINE</span>
                <button id="wake-btn" class="btn btn-xs btn-outline-cyan hidden" onclick="triggerWake()">WAKE
                    UP</button>
            </div>
            <div class="agent-identity">
                <h1 id="agent-label">AGENT: <span id="agent-name">BOOTING...</span></h1>
                <p id="agent-version">v0.1.0</p>
            </div>
        </header>

        <!-- Main Content Grid -->
        <main class="dashboard-grid">

            <!-- Left Panel: Progress & Config -->
            <section class="panel creation-panel">
                <div class="step-progress">
                    <div class="step active" data-step="1">1</div>
                    <div class="line"></div>
                    <div class="step" data-step="2">2</div>
                    <div class="line"></div>
                    <div class="step" data-step="3">3</div>
                    <div class="line"></div>
                    <div class="step" data-step="4">4</div>
                    <div class="line"></div>
                    <div class="step" data-step="5">5</div>
                </div>
                <div class="step-label" id="current-step-label">Initializing Genesis</div>

                <div class="info-block glass-card">
                    <h3>Genesis Prompt</h3>
                    <p id="genesis-prompt" class="dim">Awaiting system prompt...</p>
                </div>

                <div class="info-block glass-card">
                    <h3>Survival Strategy</h3>
                    <p id="survival-strategy">Provider: <span id="bridge-provider">--</span></p>
                    <p id="refill-amount">Refill: <span id="refill-val">$0.00</span></p>
                </div>

                <div class="info-block glass-card">
                    <h3>Treasury Holdings</h3>
                    <div class="holdings-list">
                        <div class="holding-item">
                            <span class="holding-label">Solana USDC</span>
                            <span class="holding-value">$<span id="solana-balance">0.00</span></span>
                        </div>
                        <div class="holding-item">
                            <span class="holding-label">Solana SOL</span>
                            <span class="holding-value">â—Ž<span id="solana-sol-balance">0.0000</span></span>
                        </div>
                        <div class="holding-item">
                            <span class="holding-label">Base USDC</span>
                            <span class="holding-value">$<span id="base-usdc-balance">0.00</span></span>
                        </div>
                        <div class="holding-item">
                            <span class="holding-label">Base ETH</span>
                            <span class="holding-value">Îž<span id="base-eth-balance">0.0000</span></span>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Right Panel: Financial Health -->
            <section class="panel financial-panel">
                <div class="card credit-card glowing-cyan">
                    <div class="card-header-row">
                        <div class="flex items-center gap-2">
                            <h2>RUNTIME CAPACITY</h2>
                            <button class="btn-icon flex items-center gap-1" onclick="updateDashboard()"
                                title="Sync Treasury">
                                ðŸ”„ <span class="sync-text">sync treasury</span>
                            </button>
                        </div>
                        <span id="protocol-badge" class="badge badge-x402 hidden">X402 ACTIVE</span>
                    </div>
                    <div class="balance-row">
                        <span class="currency-symbol">$</span>
                        <span id="runtime-capacity" class="balance-value">0.00</span>
                    </div>
                    <div class="capacity-details">
                        <div class="detail-item">
                            <span class="detail-label">CONWAY CREDITS</span>
                            <span class="detail-value">$<span id="credit-balance">0.00</span></span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">SOVEREIGN TREASURY</span>
                            <span class="detail-value">$<span id="treasury-balance">0.00</span></span>
                        </div>
                    </div>
                    <div class="flex gap-2" style="margin-top: 15px;">
                        <button class="btn btn-xs btn-primary w-full" onclick="openTopUpModal()">TOP UP /
                            BRIDGE</button>
                    </div>
                </div>

                <div class="wallet-info glass-card">
                    <h3>SECURE ENDPOINTS</h3>
                    <div class="wallet-row">
                        <label>SOLANA (SPL)</label>
                        <code id="solana-address">--------------------------------------------</code>
                    </div>
                    <div class="wallet-row">
                        <label>ETHEREUM (EVM)</label>
                        <code id="eth-address">0x0000000000000000000000000000000000000000</code>
                    </div>
                </div>
            </section>

        </main>

        <!-- Footer / Logs -->
        <footer>
            <div class="log-preview">
                <span class="log-label">System Logs:</span>
                <div id="log-stream" class="log-stream">
                    <p class="log-line">[SYS] Initializing Sovereign Dashboard...</p>
                    <p class="log-line">[SYS] Connecting to local gateway...</p>
                </div>
            </div>
        </footer>
    </div>

    <script src="app.js"></script>
</body>

</html>